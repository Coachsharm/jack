# Website Portfolio & Dashboard Architecture

## Overview
This document outlines the structure, deployment, and architecture of the "Jack's Site Project" website portfolio hosted on the VPS. It details the local development environment, the server-side organization, and specifically deeply analyzes the `dashboard` monitoring system implemented in Feb 2026.

## Directory Structure

### Local Development
The source code for all web projects resides in:
`c:\Users\hisha\Code\Jack\websites\`

**Key Projects:**
- `dashboard/`: The central monitoring hub for bot status and token usage.
- `BodyThrive/`: Fitness-related landing page.
- `fitbodythrive/`: Main fitness business site.
- `gombal/`
- `lexus/`
- `nisha/`
- `pendekarbujanglapok/`
- `satay/`
- `zhywee/`

### Server Deployment
On the Hostinger VPS (`72.62.252.124`), these sites are hosted under:
`/var/www/sites/`

**Mapping:**
| Local Directory | Server Directory | Public URL (Example) |
| :--- | :--- | :--- |
| `websites\dashboard` | `/var/www/sites/dashboard` | `http://sites.thriveworks.tech/dashboard/` |
| `websites\BodyThrive` | `/var/www/sites/BodyThrive` | (Assuming subdomain config) |
| ... | ... | ... |

## The Dashboard System
The dashboard provides real-time and historical monitoring of the AI bot ecosystem (Jack, Sarah, Ross, John) and API token usage (Claude, Gemini).

### Architecture
The dashboard is a static HTML/JS frontend that fetches data from two JSON files generated by backend scripts.

**1. Real-Time Status (`status.json`)**
- **Source:** Generated by the main OpenClaw/Jack system (likely `monitor.py` or similar internal process).
- **Update Frequency:** High (Real-time/Seconds).
- **Contents:**
  - Current `%` tokens remaining for Faith & Black accounts.
  - Reset times.
  - Bot online status (Green/Red dots).
  - Urgent alerts (Emails, Calendar).

**2. Historical Data (`history.json`)**
- **Source:** Generated by `update_history.py` running as a cron job.
- **Update Frequency:** Hourly.
- **Contents:**
  - `hourly`: Array of last 24h usage data points.
  - `daily`: Array of last 7 days daily peak usage.

**3. The Historian Script (`update_history.py`)**
- **Location:** `/var/www/sites/dashboard/update_history.py`
- **Function:**
  - Reads `status.json`.
  - Calculates "Usage %" (100 - Remaining %).
  - Appends data to `history.json`, maintaining a rolling window (24h hourly, 7d daily).
  - Handles day rollover logic.

### Automation (Cron Job)
The historical data requires a scheduled task on the server to act as the "historian".

**Cron Entry:**
```bash
0 * * * * python3 /var/www/sites/dashboard/update_history.py
```
This runs at minute 0 of every hour.

## Deployment Workflow
To deploy updates to any site (e.g., the dashboard):

1. **Edit Locally:** Modify files in `c:\Users\hisha\Code\Jack\websites\dashboard`.
2. **Deploy via SCP:**
   ```powershell
   # Example: Deploying Dashboard
   scp -r c:\Users\hisha\Code\Jack\websites\dashboard\* root@72.62.252.124:/var/www/sites/dashboard/
   ```
3. **Set Permissions (If new scripts):**
   ```bash
   ssh root@72.62.252.124 "chmod +x /var/www/sites/dashboard/update_history.py"
   ```

## Troubleshooting
- **Charts Empty?**
  - Check if `history.json` exists on the server.
  - Check permissions: `ls -l /var/www/sites/dashboard/history.json`
  - Verify cron job is running: `grep CRON /var/log/syslog`
- **Status Not Updating?**
  - Check the Bot/OpenClaw logs to ensure it's writing `status.json`.

---
*Last Updated: Feb 12, 2026*
